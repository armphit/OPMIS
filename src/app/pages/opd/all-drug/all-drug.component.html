<div style="overflow: auto;margin: 10px;">

  <div class="row">
    <div class="col-lg-9">

    </div>
    <div class="col-lg-3" *ngIf="dataDrug">
      <mat-form-field class="example-full-width" style="float: right;">
        <input matInput (keyup)="applyFilter($event)" #input>
        <mat-placeholder>ค้นหา</mat-placeholder>
        <mat-icon matSuffix style="font-size: 1.2em">search</mat-icon>
      </mat-form-field>
    </div>
  </div>



  <div class="responsive-table" [hidden]="!dataDrug">


    <table mat-table matTableExporter [dataSource]="dataSource" matSort #exporter="matTableExporter"
      class="mat-elevation-z8" matSortActive="deviceName" matSortDirection="asc">



      <ng-container matColumnDef="drugCode">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Code </th>
        <td mat-cell *matCellDef=" let element" style="padding-left: 20px;padding-right: 20px;"> {{element.drugCode}}
        </td>
      </ng-container>


      <ng-container matColumnDef="drugName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let element" style="padding-left: 20px;padding-right: 20px;"> {{element.drugName}}
        </td>
      </ng-container>


      <ng-container matColumnDef="miniUnit">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Unit </th>
        <td mat-cell *matCellDef="let element" style="padding-left: 20px;padding-right: 20px;"> {{element.miniUnit}}
        </td>
      </ng-container>

      <ng-container matColumnDef="deviceName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Device Name </th>
        <td mat-cell *matCellDef="let element" style="padding-left: 20px;padding-right: 20px;"> {{element.deviceName}}
        </td>
      </ng-container>

      <ng-container matColumnDef="positionID">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Position
        </th>
        <td mat-cell *matCellDef="let element" style="padding-left: 20px;padding-right: 20px;"> {{element.positionID}}
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Action
        </th>
        <td mat-cell *matCellDef="let element" style="padding-left: 20px;padding-right: 20px;">
          <button type="button" class="btn btn-primary" data-toggle="modal" data-backdrop="static" data-keyboard="false"
            data-target="#myModal" (click)="edit(element.drugCode)"><i class="fas fa-upload"></i>&nbsp; Upload</button>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <div style="float: right;" *ngIf="dataDrug">
      <button mat-raised-button color="primary"
        (click)="exporter.exportTable('xlsx', {fileName:nameExcel, sheet: 'sheet_name', Props: {Author: 'Talha'}})">Excel</button>
    </div>
    <mat-paginator style="display: flex;justify-content: center;" [length]="10" [pageSize]="10"
      [pageSizeOptions]="[10, 50, 100]" showFirstLastButtons>
    </mat-paginator>

  </div>

</div>




<!-- The Modal -->
<div class="modal fade" id="myModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Edit Image</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div class="col-md-10">
          <!-- <input type="file" class="custom-file-input" id="customFile" #fileInput (change)="fileChangeEvent($event)"
            required accept="image/*" />
          <label class="custom-file-label text-left" for="customFile">{{ img_name }}</label> -->
          <!-- <button class="button button--pan"><span>Upload</span></button> -->
          <span><a href="#" (click)="compressFile()"></a></span>
        </div>
        <img *ngIf="imageSrc&&!imgResultAfterCompress" [src]="imageSrc" alt="" height="500" width="400" />
        <img *ngIf="imgResultAfterCompress&&!imageSrc" [src]="imgResultAfterCompress" alt="" height="500" width="400" />
        <!--
        <br>
        <div *ngIf="imageSrc&&!imageChangedEvent">
          <img [src]="imageSrc" height="500" width="400" />
        </div> -->


        <!-- <mat-grid-list cols="2" *ngIf="imageChangedEvent&& !imageSrc">
          <mat-grid-tile>
            <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="false"
              [containWithinAspectRatio]="containWithinAspectRatio" [aspectRatio]="4 / 3" [resizeToWidth]="256"
              [cropperMinWidth]="128" [onlyScaleDown]="true" [roundCropper]="false" [canvasRotation]="canvasRotation"
              [transform]="transform" [alignImage]="'left'" [style.display]="showCropper ? null : 'none'" format="png"
              (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded()"></image-cropper>
          </mat-grid-tile>
          <mat-grid-tile><img *ngIf="croppedImage" [src]="croppedImage" [style.border]="croppedImage" />
          </mat-grid-tile>
        </mat-grid-list> -->

        <!-- <div class="row">
          <div class="col">
            <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true"
              [containWithinAspectRatio]="containWithinAspectRatio" [aspectRatio]="4 / 3" [resizeToWidth]="256"
              [cropperMinWidth]="128" [onlyScaleDown]="true" [roundCropper]="false" [canvasRotation]="canvasRotation"
              [transform]="transform" [alignImage]="'left'" [style.display]="showCropper ? null : 'none'" format="png"
              (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded()" (cropperReady)="cropperReady($event)"
              (loadImageFailed)="loadImageFailed()"></image-cropper>
          </div>
          <div class="col">
            <img *ngIf="croppedImage" [src]="croppedImage" [style.border]="croppedImage" />
          </div>
        </div>






      </div>
      <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="sendImage()">Submit</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="closeImg()">Close</button>
        </div>

      </div>
    </div>
  </div>


  <!-- <div id="myModalImg" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <span class="close" data-dismiss="modal">&times;</span>
  <img [src]="imageSrc" class="img-responsive" height="500px" style="text-align: center;">

</div> -->
