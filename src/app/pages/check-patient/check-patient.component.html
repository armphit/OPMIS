<div class="container-fluid mt-3">
  <h2 class="mb-4">üîç ‡∏™‡πÅ‡∏Å‡∏ô ID ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>

  <div class="input-group mb-4">
    <input
      [(ngModel)]="patientId"
      type="text"
      class="form-control form-control-lg"
      placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πÅ‡∏Å‡∏ô ID"
      (keyup.enter)="scan()"
    />
    <button class="btn btn-primary btn-lg" (click)="scan()">Scan</button>
  </div>

  <div *ngIf="patient">
    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß -->
    <mat-accordion class="mb-3" multi>
      <!-- <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß </mat-panel-title>
        </mat-expansion-panel-header>
        <p><strong>ID:</strong> {{ patient.id }}</p>
        <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> {{ patient.name }}</p>
        <p><strong>‡πÄ‡∏û‡∏®:</strong> {{ patient.gender }}</p>
        <p><strong>‡∏≠‡∏≤‡∏¢‡∏∏:</strong> {{ patient.age }} ‡∏õ‡∏µ</p>
      </mat-expansion-panel>


      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> üìá ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß </mat-panel-title>
        </mat-expansion-panel-header>
        <p><strong>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:</strong> {{ patient.citizenId }}</p>
        <p><strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong> {{ patient.address }}</p>
      </mat-expansion-panel> -->
      <mat-expansion-panel class="info-panel">
        <mat-expansion-panel-header>
          <mat-panel-title> üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ </mat-panel-title>
        </mat-expansion-panel-header>
        <div style="margin: 10px">
          <div class="section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</div>
          <div class="info-grid contrainer">
            <div><strong>ID:</strong> {{ patient[0]?.hn }}</div>
            <div><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> {{ patient[0]?.patientname }}</div>
            <div><strong>‡πÄ‡∏û‡∏®:</strong> {{ patient[0]?.sex }}</div>
            <div><strong>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</strong> {{ patient[0]?.birthDay }}</div>
            <div><strong>‡∏≠‡∏≤‡∏¢‡∏∏:</strong> {{ patient[0]?.Age }} ‡∏õ‡∏µ</div>
          </div>

          <mat-divider></mat-divider>

          <div class="section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</div>
          <div class="info-grid">
            <div><strong>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:</strong> {{ patient[0]?.CardID }}</div>
            <div class="address">
              <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong> {{ patient[0]?.addr }}
            </div>
          </div>
        </div>
      </mat-expansion-panel>

      <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤ -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> üíä ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤ </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-card class="mb-3">
          <mat-card-content>
            <table
              mat-table
              [dataSource]="patient"
              class="mat-elevation-z1 w-100"
            >
              <ng-container matColumnDef="invName">
                <th mat-header-cell *matHeaderCellDef>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</th>
                <td mat-cell *matCellDef="let med">{{ med.invName }}</td>
              </ng-container>

              <ng-container matColumnDef="qtyReq">
                <th mat-header-cell *matHeaderCellDef>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <td mat-cell *matCellDef="let med">{{ med.qtyReq }}</td>
              </ng-container>

              <ng-container matColumnDef="unit">
                <th mat-header-cell *matHeaderCellDef>‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                <td mat-cell *matCellDef="let med">{{ med.unit }}</td>
              </ng-container>

              <tr
                mat-header-row
                *matHeaderRowDef="['invName', 'qtyReq', 'unit']"
              ></tr>
              <tr
                mat-row
                *matRowDef="let row; columns: ['invName', 'qtyReq', 'unit']"
              ></tr>
            </table>
          </mat-card-content>
        </mat-card>
      </mat-expansion-panel>

      <!-- Check Card -->
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title> ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Ñ </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col-md-4 mb-3" *ngFor="let check of patient2?.checks">
            <mat-card
              [ngClass]="{
                'bg-success text-white': check.status === 'pass',
                'bg-danger text-white': check.status === 'fail'
              }"
              class="check-card mat-elevation-z2"
              style="cursor: pointer"
              (click)="check.status === 'fail' ? openDetail(check) : null"
            >
              <mat-card-title>{{ check.title }}</mat-card-title>
              <mat-card-content>
                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: {{ check.status | uppercase }}
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>

<!-- Modal -->
<div
  class="modal fade"
  id="staticBackdrop"
  data-backdrop="static"
  data-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">...</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>
